#set binary name
set(BINARY ${CMAKE_PROJECT_NAME}_tst)
SET(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} -std=c++20 -pthread")
# Setup testing
enable_testing()
find_package(GTest REQUIRED)
include_directories(${GTEST_INCLUDE_DIR})

file(GLOB_RECURSE TEST_SOURCES LIST_DIRECTORIES false *.h *.cpp)
set(SOURCES ${TEST_SOURCES})
add_executable(${BINARY} ${TEST_SOURCES})

# Link the lib library and gtest library generated by src and the SFML library.
target_link_libraries(${BINARY} PUBLIC gtest gtest_main ${CMAKE_PROJECT_NAME}_lib sfml-graphics sfml-audio)

add_test(NAME ${BINARY} COMMAND ${BINARY})
find_package(SFML 2.5 COMPONENTS system window graphics audio REQUIRED)


include_directories(include)